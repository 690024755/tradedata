package com.songxiaocai.tradedata.service;/* * Description:com.songxiaocai.tradedata.service * @Date Create on 09:39 * @author <a href="mailto:yangyi@songxiaocai.com">yangyi</a> * @Version JDK 1.8 * @since version 1.0 Copyright 2019-03-19日SXC All Rights Reserved. */import com.songxiaocai.tradedata.application.repository.SxcAccountRepository;import com.songxiaocai.tradedata.application.repository.SxcUserRepository;import com.songxiaocai.tradedata.service.params.SxcUserInfoDTO;import com.sxc.common.domain.result.Result;import lombok.extern.slf4j.Slf4j;import org.apache.commons.lang3.StringUtils;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Component;@Component@Slf4jpublic class BalanceService {	@Autowired	private SxcAccountRepository sxcAccountRepository;	@Autowired	private SxcUserRepository sxcUserRepository;	public Result<String> modifyBalance(String mobile, Long amount){		Result<String> re=new Result<>();		Boolean bl=false;		try{			SxcUserInfoDTO sxcUserInfoDTO=sxcUserRepository.getByMobilePhone(mobile);			Integer userId=sxcUserInfoDTO.getUserId();			if(sxcUserInfoDTO!=null && StringUtils.isNotBlank(String.valueOf(userId))){				 bl=sxcAccountRepository.modifyBalance(userId,amount);			}else{				re.setSuccess(false);				re.setErrorMessage("查询不到用户信息");			}            if(bl){				re.setSuccess(true);			}else{				re.setSuccess(false);				re.setErrorMessage("修改用户余额失败");			}		}catch (Exception e){			log.error("修改余额异常: {}", e);			re.setSuccess(false);			re.setErrorMessage("修改余额异常");		}		re.setData("修改用户余额成功");		re.setSuccess(true);		return re;	}}