package com.songxiaocai.tradedata.test;/* * Description:com.songxiaocai.tradedata.test * @Date Create on 14:04 * @author <a href="mailto:yangyi@songxiaocai.com">yangyi</a> * @Version JDK 1.8 * @since version 1.0 Copyright 2019-02-15日SXC All Rights Reserved. */import com.alibaba.fastjson.JSON;import com.alibaba.fastjson.JSONObject;import com.songxiaocai.tradedata.application.repository.SxcAccountRepository;import com.songxiaocai.tradedata.application.repository.SxcUserRepository;import com.songxiaocai.tradedata.client.result.SxcAccountInfoDTO;import com.songxiaocai.tradedata.service.BalanceService;import com.songxiaocai.tradedata.service.CouponsService;import com.songxiaocai.tradedata.service.CutOrderService;import com.songxiaocai.tradedata.service.params.SxcUserInfoDTO;import com.songxiaocai.tradedata.tool.http.HttpRequestSimple;import com.songxiaocai.tradedata.tool.jedis.JedisTemplate;import com.sxc.common.domain.result.Result;import lombok.extern.slf4j.Slf4j;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.test.context.ContextConfiguration;import org.springframework.test.context.testng.AbstractTestNGSpringContextTests;import org.testng.annotations.Test;import java.util.HashMap;import java.util.Map;@Slf4j@ContextConfiguration(locations = {"/META-INF/spring/tradedata-context.xml"})public class TestService extends AbstractTestNGSpringContextTests {	//private static Logger log = LoggerFactory.getLogger(TestService.class);	@Autowired	private SxcUserRepository sxcUserRepository;	@Autowired	private SxcAccountRepository sxcAccountRepository;	@Autowired	JedisTemplate jedisTemplate;	@Test	public void test1() {		SxcUserInfoDTO Result = sxcUserRepository.getByMobilePhone("13093863511");		System.out.println("test1=" + JSON.toJSONString(Result));		System.out.println(Result);	}	@Test	public void test2() {		SxcAccountInfoDTO Result = sxcAccountRepository.getByUserId(48830);		System.out.println("test2=" + JSON.toJSONString(Result));		log.info(JSON.toJSONString(Result));		log.info(JSON.toJSONString(Result));	}	@Test	public void test3() {		/**		 * 修改小B用户账户余额		 * 金额100为1元		 */		Boolean Result = sxcAccountRepository.modifyBalance(48830,1000L);		System.out.println("test3=" + JSON.toJSONString(Result));	}	@Autowired	private HttpRequestSimple httpclent;	@Test	public void test4(){		Integer SESSION_MAX_AGE = 60 * 60 * 24 * 30;		Map<String,String> hashmap=new HashMap<String,String>();		hashmap.put("appKey","18701298");		hashmap.put("bizCode","erp_login");		hashmap.put("deviceUUID","9a6c608fbc1f488edd7a14e9488397c5");		hashmap.put("mobilePhone","18888888888");		hashmap.put("password","12345");		String url="https://gateway.songxiaocai.net/login/login";		//HttpRequestSimple httpclent = new HttpRequestSimple();		log.info("登录请求报文:" + JSON.toJSONString(hashmap));		String resJson_login = httpclent.postSendHttpWeb(url,JSON.toJSONString(hashmap));		log.info("登录返回报文:" + resJson_login);		String  sessionId = JSONObject.parseObject(resJson_login).getJSONObject("result").getString("sessionId");		StringBuffer redis_key=new StringBuffer("18888888888").append("-").append("18701298").append("-").append("erp_login");		jedisTemplate.set(redis_key.toString(),sessionId,SESSION_MAX_AGE);		Object tt=jedisTemplate.get(redis_key.toString());		System.out.println(tt);	}	@Autowired	private CouponsService couponsService;	@Test	public void test5() {		couponsService.sendCoupons("13093863511",1);	}	@Autowired	private CutOrderService cutOrderService;	@Test	public void test6() {		Result<String> re=cutOrderService.modifyCutOffTime("13093863511",5934);		log.info("修改结果="+re);	}	@Autowired	private BalanceService balanceService;	@Test	public void test7() {		Result<String> re=balanceService.modifyBalance("13093863511",1000L);		log.info("修改结果="+re);	}}