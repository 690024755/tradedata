import config from "../../config/config";var React = require('react');var ReactDOM = require('react-dom');const margin = {width: '163px', height: '20px'};export default class Rebate extends React.Component {    constructor(props) {        super(props);        this.state = {            operateId: '41684',            ItemIdsArray: '9478,10039,18548,10366',            amount: '-1000',        }    }    handleChangeItemIdsArray(e){        this.setState({            ItemIdsArray:e.target.value,        });    }    handleChangeAmount(e){        this.setState({            amount:e.target.value,        });    }    handleChangeCommon(){        const formData = new FormData();        formData.append("ItemIdsArray",this.state.ItemIdsArray);        formData.append("amount",this.state.amount);        const requestBody=new URLSearchParams(formData).toString();        console.log("requestBody=" +requestBody);        const url = config.modifyPurchaseInquiryPrice;        const opts = {            mode: 'cors',            method:"POST",            body:requestBody,   //请求体            headers: {                'Accept': 'application/json',                'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8',            },        };        fetch(url, opts).then(res => res.text())            .then(data => {                const resData=JSON.parse(data);                console.log("data=" +JSON.stringify(data));                if(                    resData.success                ){                    //alert(resData['successInfo']);                    alert(resData.successInfo);                }else {                    //alert(resData['errorMessage']);                    alert(resData.errorMessage);                }            }).catch(e => console.log('错误:', e))    }    handleChangeOperateId(e){        this.setState({            operateId:e.target.value,        });    }    handleChangeOperateId(){        const formData = new FormData();        formData.append("operateId",this.state.operateId);        const requestBody=new URLSearchParams(formData).toString();        console.log("requestBody=" +requestBody);        const url = config.excuteRebate;        const opts = {            mode: 'cors',            method:"POST",            body:requestBody,            headers: {                'Accept': 'application/json',                'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8',            },        };        fetch(url, opts).then(res => res.text())            .then(data => {                const resData=JSON.parse(data);                console.log("data=" +JSON.stringify(data));                if(                    resData.success                ){                    alert(resData.successInfo);                }else {                    alert(resData.errorMessage);                }            }).catch(e => console.log('错误:', e))    }    render(){        return(            <div>                <div>                <div>修改行情返差价的采购价格</div>                <div>                    <label >itemId：<input style={margin} id="ItemIdsArray" type="text" value={this.state.ItemIdsArray} onChange={e => this.handleChangeItemIdsArray(e)} defaultValue={this.state.ItemIdsArray}                    />itemId:9478,10039,18548,10366</label>                    <br/>                    <div> itemId:9478--老孙云南新葱(云丰),10039--老李四川洋葱（云果）,18548--宋小菜蒜籽40斤--,10366--老李纸箱洋葱(云丰、云果)</div>                </div>                <div>                    <label >降价金额：<input style={{"width":'65px', "height":'20px'}} id="amount" type="text" value={this.state.amount} onChange={e => this.handleChangeAmount(e)} defaultValue={this.state.amount}                    />金额=1000表示10元</label>                </div>                <div>                    <label >                        <button onClick={this.handleChangeCommon.bind(this)}>提交</button>                    </label>                </div>                </div>                <br/>                <div>                    <div>执行行情返差价</div>                    <div>                        <label >                            <button onClick={this.handleChangeOperateId.bind(this)}>提交</button>                        </label>                    </div>                </div>                <br/>            </div>        );    }}